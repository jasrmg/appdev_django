{% load static %}
<style>
  /* Modal styles */
  #followerModal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Black with opacity */
  }

  .followermodal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%; /* Width of the modal */
  }

  .close-follower-modal {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close-follower-modal:hover,
  .close-follower-modal:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

  .followermodal-footer .close-follower-modal-btn {
    background-color: #555;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
  }
</style>

<!-- Follower Modal Structure -->
<div id="followerModal">
  <div class="followermodal-content">
    <div class="followermodal-header">
      <span class="close-follower-modal">&times;</span>
      <h2>Followers</h2>
    </div>
    <div class="modal-body">
      <ul id="followerList">
        <!-- This will be populated with follower usernames -->
        {% if followers %} {% for user in followers %}
        <li>{{ user.follower.username }}</li>
        {% empty %}
        <li>No followers yet</li>
        {% endfor %} {% endif %}
      </ul>
    </div>
    <div class="followermodal-footer">
      <button class="close-follower-modal-btn">Close</button>
    </div>
  </div>
</div>

<script>
  // Open follower modal function
  function openFollowerModal() {
    const followermodal = document.getElementById("followerModal");
    followermodal.style.display = "block"; // Show the modal
    console.log("Modal opened"); // Debugging log

    // Close modal when clicking the close (X)
    followermodal.querySelector(".close-follower-modal").onclick = function () {
      followermodal.style.display = "none"; // Hide the modal
      console.log("Modal closed with X"); // Debugging log
    };

    // Close modal when clicking "Close" button in footer
    followermodal.querySelector(".close-follower-modal-btn").onclick =
      function () {
        followermodal.style.display = "none"; // Hide the modal
        console.log("Modal closed with Close button"); // Debugging log
      };

    // Close modal when clicking outside the modal content
    window.onclick = function (event) {
      if (event.target === followermodal) {
        followermodal.style.display = "none"; // Hide the modal
        console.log("Modal closed by clicking outside"); // Debugging log
      }
    };
  }
</script>
