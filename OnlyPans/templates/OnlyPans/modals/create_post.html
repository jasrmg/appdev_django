{% load static %}
{% if user == request.user %}
<style>
  /*CREATE POST*/
  .createpost_container {
    display: flex;
    justify-content: center;
  }

  .create_post {
    display: flex;
    flex-direction: row;
    justify-content: center;
    background: #33221a;
    border-radius: 20px;
    padding: 20px;
    align-items: center;
    margin-top: 10px;
  }

  .post-input {
    border: 1px solid #ccc;
    border-radius: 20px;    
    padding: 10px 20px;     
    background-color: #f9f9f9; 
    min-width: 50vw;
    
    cursor: pointer;         
    transition: background-color 0.3s;
  }

  .post-input:hover {
    background-color: #e9e9e9; 
  }
  /*modal content*/
  .createPostModalContent {
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #fefefe;

    padding: 30px;
    border: 1px solid #888;
    width: 40%;
    border-radius: 8px;
    text-align: center;
  }
  .modal-open {
    overflow: hidden;
  }
  /*close btn*/
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }
  .close:hover,
  .close:focus {
    color: red;
    text-decoration: none;
    cursor: pointer;
  }
</style>
<div class="createpost_container">
  <div class="create_post">
      <img src="{% if user.avatar %}{{ user.avatar.url }}{% else %}{% static 'images/avatars/default-avatar.jpeg' %}{% endif %}" alt="User Avatar" class="user-avatar" id="user_avatar">
      <!--trigger button-->
      <div class="post-input" id="openCreatePostModalBtn">What's cooking, {{ user.first_name }}?</div> 

      <!-- Create Post Modal  -->
      <div id="createPostModal" class="modal">
          <div class="createPostModalContent">
            <span class="close">&times;</span>
            <h5>Create Post</h5>
            <form method="POST" action="{% url 'create_post' user.username %}" enctype="multipart/form-data">
              {% csrf_token %}
              <input type="hidden" name="create_post" value="true">
              {{ createpost_form.as_p }}
              <button type="submit" class="btn" id="createPostSubmit">Post</button>
            </form>
          </div>
      </div>

  </div>
</div>
<script>
  var createPostModal = document.getElementById('createPostModal');
  var btn = document.getElementById('openCreatePostModalBtn');
  var span = document.getElementsByClassName('close'); 

  btn.onclick = function () {
    createPostModal.style.display = "block";
    document.body.classList.add("modal-open");
  }

  for (let i = 0; i < span.length; i++) {
    span[i].onclick = function () {
      createPostModal.style.display = "none";
      document.body.classList.remove("modal-open");
    }
  }

  window.onclick = function(event) {
    if (event.target == createPostModal) {
      createPostModal.style.display = "none";
      document.body.classList.remove("modal-open")
    }
  }
</script>
{% endif %} 


