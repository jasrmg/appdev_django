{% include 'base.html' %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/search.css' %}" />


{% if user.is_authenticated %}
<div class="search-view-container">
  <div id="aside-filter" class="sidebar-search">
    <h2>Search results</h2>
    <hr />
    <div class="filters">
      <a href="#" class="active" id="all-filter"><i class="fas fa-th"></i> All</a>
      <a href="#" id="posts-filter"><i class="fas fa-newspaper"></i> Posts</a>
      <a href="#" id="people-filter"><i class="fas fa-users"></i> People</a>
      <a href="#" id="meat-filter"><i class="fas fa-hamburger"></i> Meat</a>
      <a href="#" id="seafood-filter"><i class="fas fa-fish"></i> Seafood</a>
      <a href="#" id="chicken-filter"><i class="fas fa-drumstick-bite"></i> Chicken</a>
      <a href="#" id="veggies-filter"><i class="fas fa-carrot"></i> Veggies</a>
      <a href="#" id="dessert-filter"><i class="fas fa-ice-cream"></i> Dessert</a>
      <a href="#" id="snack-filter"><i class="fas fa-cookie"></i> Snack</a>
      <a href="#" id="beverage-filter"><i class="fas fa-coffee"></i> Beverage</a>
    </div>
    
  </div>


  <div class="result-container">
    <div class="user-results">
      <h2>People</h2>
      {% for user in users %}
      <div class="person user-item {% if forloop.counter > 3 %} hidden {% endif %}">
        {% comment %}style="{% if forloop.counter > 3 %} display: none;{% endif %}"{% endcomment %}
        <img
          src="{{ user.avatar.url }}"
          alt="{{ user.username }}"
        />
        <div>
          <a href="{% url 'profile' user.username %}">{{ user.first_name }} {{ user.last_name }}</a>
          <span class="search-follower-count">
            {% if user.follower_count == 0 %}    
            {{ user.follower_count }} follower
            {% else %} 
            {{ user.follower_count }} {{ user.follower_count|pluralize:"follower, followers" }}
            {% endif %}
          </span>
            
          
        </div>
        {% csrf_token %}
        <button class="search-follow-btn" id="searchFollowBtn" data-username="{{ user.username }}"
          data-logged-in-username="{{ request.user.username }}">
          {% if user.is_following %}
            Unfollow
          {% else %}
            Follow
          {% endif %}
        </button>
      </div>
      {% empty %}
      <div class="person">
        <span>No users found.</span>
      </div>

      {% endfor %}
      {% if users|length > 3 %}
        <button class="see-all-btn" id="toggle-btn">See More</button>
      {% endif %}
    </div>

    <div class="search-food-results">
      <h2>Posts</h2>
    <!--post-->
      <div class="search-post">
        <!--post header-->
        <div class="search-post-header">
          <div class="search-post-owner-details">
            <div class="search-post-owner">
              <div class="search-avatar-image">
                <img src="" alt="{{ user.username }}">
              </div>
              <span class="owner-name">asd</span>
              <span class="post-date">5 mins ago</span>
            </div>
          </div>
          <div class="search-post-actions">
            <button class="search-post-edit">
              <i class="fa-solid fa-pencil-alt" style="color: #33221a" title="Edit"></i>
            </button>
            <button class="search-post-delete">
              &times;
            </button>
          </div>
        </div>
        <!--post body-->
        <div class="search-post-body">
          <span class="search-post-title">Testing</span>
          <div class="search-post-image">
            <img src="" alt="post-image">
          </div>
        </div>
        <!--post footer-->
        <div class="search-post-footer">
          <span class="no-of-likes">10 Likes</span>
          <span class="no-of-comments">10 Comments</span>
        </div>
      </div>
    </div>
  </div>
  
</div>
<script src="{% static 'js/search.js' %}"></script>
{% endif %}
{% endblock %}
